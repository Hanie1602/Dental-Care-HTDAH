@model Dental_Clinic_System.ViewModels.PatientRecordVM
@{
	ViewData["Title"] = "CreatePatientRecord";
}

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Dental Care | login</title>
	<link rel="stylesheet"
		  href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css" />
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link href="https://fonts.googleapis.com/css2?family=Baloo+Paaji+2:wght@400..800&display=swap"
		  rel="stylesheet" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
		  rel="stylesheet"
		  integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
		  crossorigin="anonymous" />
	<link rel="stylesheet" href="~/assets/css/header.css" />
	<link rel="stylesheet" href="~/assets/css/footer.css" />
	<link rel="stylesheet" href="~/assets/css/patientrecord.css" />
</head>

<div class="pt__record add">
	<h1 class="pt__record__title text-center fw-bold">Tạo mới hồ sơ</h1>
	<div class="text-center">
		<img src="~/assets/images/separate.png" alt="" />
	</div>
	<!-- ======= STYLE NEW ======= -->
	<div class="pt__record__add__wrapper">
		<div class="style__container add">
			<div class="style__container__add">
				<h2 class="record__add__title text-center">
					Nhập thông tin bệnh nhân
				</h2>
				<div class="record__add__desc">
					Vui lòng cung cấp thông tin chính xác để được phục vụ tốt nhất.
					Trong trường hợp cung cấp sai thông tin bệnh nhân & điện thoại,
					việc xác nhận cuộc hẹn sẽ không hiệu lực trước khi đặt khám.
				</div>
				<div class="record__add__required">
					(*) Thông tin bắt buộc nhập
				</div>
				<span class="text-danger h3" asp-validation-for="FMFullName"></span>
				<span class="text-danger h3" asp-validation-for="FMEmail"></span>
				<span class="text-danger h3" asp-validation-for="FMPhoneNumber"></span>
				<span class="text-danger h3" asp-validation-for="FMRelationship"></span>
				<!-- ====== FORM ====== -->
				<form method="post" asp-controller="patientrecord" asp-action="CreateNewPatientRecord" class="record__add__form row">
					<div class="col-md-6">
						<label for="fullname">Họ và tên (có dấu)<sup>*</sup></label><input id="fullname"
																					 type="text"
																					 placeholder="VÍ DỤ: AN PHÚC HOÀ"
																					 asp-for="@Model.FullName" />
						<span class="text-danger h3" asp-validation-for="FullName"></span>
					</div>
					<div class="col-md-6">
						<label for="dateofbirth">Ngày sinh (năm/tháng/ngày) <sup>*</sup></label>
						<input asp-for="@Model.DateOfBirdth" id="dateofbirth"
							   type="date"
							   lang="vi-VN"
							   style="width: 100%" />
						<span class="text-danger h3" asp-validation-for="DateOfBirdth"></span>
					</div>
					<div class="col-md-6">
						<label for="phonenumber">Số điện thoại <sup id="phoneSup">*</sup></label><input asp-for="@Model.PhoneNumber"
																								  id="phonenumber"
																								  type="text"
																								  placeholder="Vui lòng nhập số điện thoại" />
						<span class="text-danger h3" asp-validation-for="PhoneNumber"></span>
					</div>
					<div class="col-md-6">
						<label for="gender">Giới tính<sup>*</sup></label><select asp-for="@Model.Gender" id="gender">
							<option value="" disabled selected>Chọn giới tính</option>
							<option value="Nam">Nam</option>
							<option value="Nữ">Nữ</option>
						</select>
						<span class="text-danger h3" asp-validation-for="Gender"></span>
					</div>
					<div class="col-md-6">
						<label for="job">Nghề nghiệp</label><select asp-for="@Model.Job" id="job">
							<option value="" disabled selected>Chọn nghề nghiệp</option>
							<option value="Còn nhỏ">Còn nhỏ</option>
							<option value="Học sinh / Sinh viên">Học sinh / Sinh viên</option>
							<option value="Nội trợ">Nội trợ</option>
							<option value="Giáo viên">Giáo viên</option>
							<option value="Công nhân">Công nhân</option>
							<option value="Kỹ sư">Kỹ sư</option>
							<option value="Nhân viên văn phòng">Nhân viên văn phòng</option>
							<option value="Khác">Khác</option>
						</select>
					</div>
					<div class="col-md-6">
						<label for="identityNumber">Số CMND/CCCD</label><input type="text"
																   asp-for="@Model.IdentifyNumber"
																   id="identityNumber"
																   placeholder="Nhập số CMND/CCCD" />
					</div>
					<div class="col-md-6">
						<label for="email">Địa chỉ Email</label><input asp-for="@Model.Email"
													 id="email"
													 type="email"
													 placeholder="Nhập địa chỉ email để nhận phiếu khám" />
						<span class="text-danger h3" asp-validation-for="Email"></span>
					</div>
					<div class="col-md-6">
						<label for="province">Tỉnh / Thành <sup>*</sup></label><select asp-for="@Model.Province" id="tinh">
							<option value="" disabled selected>Chọn tỉnh thành</option>
							<option value=""></option>
						</select>
						<span class="text-danger h3" asp-validation-for="Province"></span>
					</div>
					<div class="col-md-6">
						<label for="district">Quận / Huyện <sup>*</sup></label><select asp-for="@Model.District" id="quan">
							<option value="" disabled selected>Chọn quận huyện</option>
							<option value=""></option>
						</select>
						<span class="text-danger h3" asp-validation-for="District"></span>
					</div>
					<div class="col-md-6">
						<label for="ward">Phường / Xã <sup>*</sup></label><select asp-for="@Model.Ward" id="phuong">
							<option value="" disabled selected>Chọn phường xã</option>
							<option value=""></option>
						</select>
						<span class="text-danger h3" asp-validation-for="Ward"></span>
					</div>
					<div class="col-md-12">
						<label for="address">Địa chỉ <sup>*</sup></label>
						<input asp-for="@Model.Address"
							   id="address"
							   type="text"
							   placeholder="Nhập địa chỉ" />
						<span class="text-danger h3" asp-validation-for="Address"></span>
					</div>

					<!-- NHỮNG DÒNG NÀY SẼ ĐƯỢC THỂ HIỆN RA NGOÀI NẾU BỆNH NHÂN CÓ ĐỘ TUỔI NHỎ HƠN 16 TUỔI -->
					<div id="age__check" class="row">
						<div class="record__add__form__divider col-md-12"></div>
						<h2 class="family__member__add__title col-md-12 text-center">
							Nhập thông tin nhân thân
						</h2>
						<div class="col-md-6">
							<label for="fmfullname">HỌ VÀ TÊN NGƯỜI THÂN (CÓ DẤU)<sup>*</sup></label><input asp-for="@Model.FMFullName"
																					   id="fmfullname"
																					   type="text"
																					   placeholder="Nhập họ tên người thân" />
						</div>
						<div class="col-md-6">
							<label for="relationship">Quan hệ với bệnh nhân<sup>*</sup></label>
							<select asp-for="@Model.FMRelationship" id="relationship">
								<option value="" disabled selected>Chọn quan hệ</option>
								<option value="Ông">Ông</option>
								<option value="Bà">Bà</option>
								<option value="Cha">Cha</option>
								<option value="Mẹ">Mẹ</option>
								<option value="Bác">Bác</option>
								<option value="Cô">Cô</option>
								<option value="Chú">Chú</option>
								<option value="Anh">Anh</option>
								<option value="Chị">Chị</option>
							</select>
						</div>
						<div class="col-md-6">
							<label for="fmphonenumber">Số điện thoại<sup>*</sup></label><input asp-for="@Model.FMPhoneNumber"
																		  id="fmphonenumber"
																		  type="text"
																		  placeholder="Vui lòng nhập số điện thoại" />
						</div>
						<div class="col-md-6">
							<label for="fmemail"> Địa chỉ Email<sup>*</sup></label><input asp-for="@Model.FMEmail"
																						  id="fmemail"
																						  type="text"
																						  placeholder="Nhập địa chỉ email để nhận phiếu khám" />
						</div>
					</div>

					<!-- BUTTON -->
					<!--  CHỖ NÀY CAANF ĐỔI THÀNH SUBMIT CHO BUTTON CÓ CLASS add-record-btn -->
					<div class="btn-wrapper add__record">
						<button type="reset" class="reset-btn">Nhập lại</button>
						<a>
							<button type="submit" class="add-record-btn">
								Tạo mới
							</button>
						</a>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/53f42380b0.js"
		crossorigin="anonymous"></script>
<!-- Kiểm tra xem độ tuổi có lớn hơn 16 hay không -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
		crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/53f42380b0.js"
		crossorigin="anonymous"></script>
<script src="https://esgoo.net/scripts/jquery.js"></script>
<script src="~/assets/js/localAPI.js"></script>
<!-- Kiểm tra xem độ tuổi có lớn hơn 16 hay không -->
<script>
	document
		.getElementById("dateofbirth")
		.addEventListener("change", function () {
			const dob = new Date(this.value);
			const today = new Date();
			const age = today.getFullYear() - dob.getFullYear();
			const ageCheck = document.getElementById("age__check");
			const phoneSup = document.getElementById("phoneSup");
			const phone = document.getElementById("phonenumber");
			const job = document.getElementById("job");
			const identityNumber = document.getElementById("identityNumber");

			if (age < 14) {
				ageCheck.style.display = "inherit";
				phoneSup.style.display = "none";

				job.value = "Còn nhỏ";
				job.disabled = true;
				phonenumber.disabled = true;
				identityNumber.disabled = true;
			} else {
				ageCheck.style.display = "none";
				phoneSup.style.display = "inline";
			}
		});

	document
		.querySelector(".reset-btn")
		.addEventListener("click", function () {
			document.getElementById("age__check").style.display = "none";
			document.getElementById("phoneSup").style.display = "inline";
		});

	//update ngày tháng năm hợp lệ trong các thẻ select (thử nghiệm)
	function updateDays() {
		var year = document.getElementById("year").value;
		var month = document.getElementById("month").value;
		var daySelect = document.getElementById("day");

		if (year && month) {
			var daysInMonth = new Date(year, month, 0).getDate();

			daySelect.innerHTML = '<option value="">Select Day</option>';
			for (var day = 1; day <= daysInMonth; day++) {
				var option = document.createElement("option");
				option.value = day;
				option.text = day;
				daySelect.appendChild(option);
			}
		} else {
			daySelect.innerHTML = '<option value="">Select Day</option>';
			for (var day = 1; day <= 31; day++) {
				var option = document.createElement("option");
				option.value = day;
				option.text = day;
				daySelect.appendChild(option);
			}
		}
	}
</script>

