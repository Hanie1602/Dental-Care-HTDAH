@model Dental_Clinic_System.Areas.Admin.ViewModels.AddClincVM

﻿@{
    ViewData["Title"] = "Liên hệ hợp tác";
}

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous" />
    @* <link rel="stylesheet" href="/richtexteditor/rte_theme_default.css" /> *@
    <link rel="stylesheet" href="~/assets/css/header.css" />
    <link rel="stylesheet" href="~/assets/css/footer.css" />
    <link rel="stylesheet" href="~/assets/css/contact.css" />
</head>

<div class="contact">
    <h1 class="contact__title text-center fw-bold">
        Hợp tác cùng <span style="color: #1376f8">Dental</span>Care
    </h1>
    <div class="text-center">
        <img src="~/assets/images/separate.png" alt="" />
    </div>
    <p class="contact__desc">
        Vui lòng gửi thông tin, chúng tôi sẽ liên hệ lại trong thời gian sớm
        nhất.
    </p>
    <form id="uploadForm" asp-area="admin" asp-controller="managerclinic" asp-action="GetApprovalRequest" method="POST" class="contact__form" onsubmit="return validateForm()">

        <input type="hidden" value="Clinic" id="folderName" />

        <div class="row">
            <div class="col-md-6">
                <p>Tên Doanh Nghiệp <sup style="color:red">*</sup></p>
                <input type="text" name="companyName" class="form-control" required pattern="^[0-9a-zA-Z\sÀ-ỹ.,-]+$" title="Tên doanh nghiệp chỉ được chứa chữ cái, chữ số, khoảng trắng và các ký tự đặc biệt như dấu chấm, dấu phẩy và dấu gạch ngang." />
            </div>
            <div class="col-md-6">
                <p>Số Điện Thoại Liên Hệ <sup style="color:red">*</sup></p>
                <input type="tel" name="companyPhonenumber" class="form-control" required pattern="^[0-9]{9,12}$" title="Số điện thoại chỉ được chứa chữ số và có độ dài từ 9-12 chữ số." />
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <p>Địa Chỉ Email <sup style="color:red">*</sup></p>
                <input type="email" name="companyEmail" class="form-control" required />
            </div>
            <div class="col-md-6">
                <p>Tên Người Đại Diện <sup style="color:red">*</sup></p>
                <input type="text" name="representativeName" class="form-control" required pattern="^[0-9a-zA-Z\sÀ-ỹ.,-]+$" title="Tên người đại diện chỉ được chứa chữ cái, chữ số, khoảng trắng và các ký tự đặc biệt như dấu chấm, dấu phẩy và dấu gạch ngang." />
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <p>Tên Phòng Khám <sup style="color:red">*</sup></p>
                <input type="text" id="fileName" name="clinicName" class="form-control" required />
            </div>
            <div class="col-md-6">
                <p>Địa Chỉ Phòng Khám <sup style="color:red">*</sup></p>
                <input type="text" name="clinicAddress" class="form-control" required pattern="^[0-9a-zA-Z\sÀ-ỹ.,-]+$" title="Địa chỉ phòng khám chỉ được chứa chữ cái, chữ số, khoảng trắng và các ký tự đặc biệt như dấu chấm, dấu phẩy và dấu gạch ngang." />
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <p>Tên Miền hoặc URL Website</p>
                <input type="url" name="domainName" class="form-control" />
            </div>
            <div class="col-md-6">
                <p>Logo Phòng Khám (900 x 900 px) <sup style="color:red">*</sup></p>
                <input type="file" id="imageInput" name="imageInput" class="form-control" required />
                <input type="hidden" name="logo" id="imageUrl" class="form-control" />
            </div>
        </div>
        <div class="row">
            <div class="col-md-4" style="margin: 20px 0; font-size: 2rem;">
                <p>Tỉnh / Thành phố <sup style="color:red">*</sup></p>
                <select id="tinh" title="Chọn Tỉnh Thành" name="provinceID" class="form-select" style="font-size: 2rem;" required>
                    <option value="0">Tỉnh Thành</option>
                </select>
            </div>
            <div class="col-md-4" style="margin: 20px 0; font-size: 2rem;">
                <p>Quận / Huyện <sup style="color:red">*</sup></p>
                <select id="quan" title="Chọn Quận Huyện" name="districtID" class="form-select" style="font-size: 2rem;" required>
                    <option value="0">Quận Huyện</option>
                </select>
            </div>
            <div class="col-md-4" style="margin: 20px 0; font-size: 2rem;">
                <p>Phường / Xã <sup style="color:red">*</sup></p>
                <select id="phuong" title="Chọn Phường Xã" name="wardID" class="form-select" style="font-size: 2rem;" required>
                    <option value="0">Phường Xã</option>
                </select>
            </div>
        </div>
        <div class="form-group col-md-12">
            <p>Thời gian làm việc buổi sáng<sup style="color:red">*</sup></p>
            <div class="row">
                <div class="col">
                    <select name="amStartTime" class="form-control" style="font-size: 2rem;" required>
                        <option value="">-- Bắt đầu --</option>
                        @foreach (var time in ViewBag.AmTimes)
                        {
                            <option value="@time">@time.ToString("HH:mm")</option>
                        }
                    </select>
                </div>
                <div class="col-auto">
                    <p style="margin-top: 5px;">đến</p>
                </div>
                <div class="col">
                    <select name="amEndTime" class="form-control" style="font-size: 2rem;" required>
                        <option value="">-- Kết thúc --</option>
                        @foreach (var time in ViewBag.AmTimes)
                        {
                            <option value="@time">@time.ToString("HH:mm")</option>
                        }
                    </select>
                </div>
            </div>
        </div>
        <div class="form-group col-md-12 mt-3">
            <p>Thời gian làm việc buổi chiều<sup style="color:red">*</sup></p>
            <div class="row">
                <div class="col">

                    <select name="pmStartTime" class="form-control" style="font-size: 2rem;" required>
                        <option value="">-- Bắt đầu --</option>
                        @foreach (var time in ViewBag.PmTimes)
                        {
                            <option value="@time">@time.ToString("HH:mm")</option>
                        }
                    </select>
                </div>
                <div class="col-auto">
                    <p style="margin-top: 5px;">đến</p>
                </div>

                <div class="col">
                    <select name="pmEndTime" class="form-control" style="font-size: 2rem;" required>
                        <option value="">-- Kết thúc --</option>
                        @foreach (var time in ViewBag.PmTimes)
                        {
                            <option value="@time">@time.ToString("HH:mm")</option>
                        }
                    </select>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-md-12">
                <p>Nội Dung <sup style="color:red">*</sup></p>
                <textarea name="content" id="default" class="form-control" required></textarea>
            </div>
        </div>
        <div class="text-end mt-3">
            <button type="submit" class="btn btn-primary">Gửi thông tin</button>
        </div>
    </form>
</div>

<script>
    function validateForm() {
        var form = document.forms["contact__form"];
        var companyName = form["companyName"].value;
        var representativeName = form["representativeName"].value;
        var clinicAddress = form["clinicAddress"].value;
        var companyPhonenumber = form["companyPhonenumber"].value;

        var namePattern = /^[0-9a-zA-Z\sÀ-ỹ.,-]+$/;
        if (!namePattern.test(companyName)) {
            alert("Tên doanh nghiệp chỉ được chứa chữ cái, chữ số, khoảng trắng và các ký tự đặc biệt như dấu chấm, dấu phẩy và dấu gạch ngang.");
            form["companyName"].focus();
            return false;
        }

        if (!namePattern.test(representativeName)) {
            alert("Tên người đại diện chỉ được chứa chữ cái, chữ số, khoảng trắng và các ký tự đặc biệt như dấu chấm, dấu phẩy và dấu gạch ngang.");
            form["representativeName"].focus();
            return false;
        }

        if (!namePattern.test(clinicAddress)) {
            alert("Địa chỉ phòng khám chỉ được chứa chữ cái, chữ số, khoảng trắng và các ký tự đặc biệt như dấu chấm, dấu phẩy và dấu gạch ngang.");
            form["clinicAddress"].focus();
            return false;
        }

        var phonePattern = /^[0-9]{9,12}$/;
        if (!phonePattern.test(companyPhonenumber)) {
            alert("Số điện thoại chỉ được chứa chữ số và có độ dài từ 9-12 chữ số.");
            form["companyPhonenumber"].focus();
            return false;
        }

        return true; // Nếu tất cả đều hợp lệ, cho phép gửi form
    }
</script>
<script src="https://kit.fontawesome.com/53f42380b0.js"
        crossorigin="anonymous"></script>
<script src="https://esgoo.net/scripts/jquery.js"></script>
<script>
    $(document).ready(function () {
        //Lấy tỉnh thành
        $.getJSON('https://esgoo.net/api-tinhthanh/1/0.htm', function (data_tinh) {
            if (data_tinh.error == 0) {
                $.each(data_tinh.data, function (key_tinh, val_tinh) {
                    $("#tinh").append('<option value="' + val_tinh.id + '">' + val_tinh.full_name + '</option>');
                });
                $("#tinh").change(function (e) {
                    var idtinh = $(this).val();
                    //Lấy quận huyện
                    $.getJSON('https://esgoo.net/api-tinhthanh/2/' + idtinh + '.htm', function (data_quan) {
                        if (data_quan.error == 0) {
                            $("#quan").html('<option value="0">Quận Huyện</option>');
                            $("#phuong").html('<option value="0">Phường Xã</option>');
                            $.each(data_quan.data, function (key_quan, val_quan) {
                                $("#quan").append('<option value="' + val_quan.id + '">' + val_quan.full_name + '</option>');
                            });
                            //Lấy phường xã
                            $("#quan").change(function (e) {
                                var idquan = $(this).val();
                                $.getJSON('https://esgoo.net/api-tinhthanh/3/' + idquan + '.htm', function (data_phuong) {
                                    if (data_phuong.error == 0) {
                                        $("#phuong").html('<option value="0">Phường Xã</option>');
                                        $.each(data_phuong.data, function (key_phuong, val_phuong) {
                                            $("#phuong").append('<option value="' + val_phuong.id + '">' + val_phuong.full_name + '</option>');
                                        });
                                    }
                                });
                            });

                        }
                    });
                });

            }
        });
    });
</script>

@* Đưa ảnh lên firebase *@
<script src="~/assets/js/upload-image-firebase-general.js" type="module"></script>